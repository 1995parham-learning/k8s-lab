manifest_url := "https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml"

# Install NGINX Ingress
install:
    @echo "Applying NGINX Ingress manifest..."
    kubectl apply -f {{ manifest_url }}
    @echo "⏳ Waiting for Ingress controller pod to be ready..."
    kubectl wait --namespace ingress-nginx \
      --for=condition=create,ready pod \
      --selector=app.kubernetes.io/component=controller \
      --timeout=120s
    @echo "✅ NGINX Ingress installed successfully."

# Remove NGINX Ingress
remove:
    @echo "Deleting NGINX Ingress manifest..."
    kubectl delete -f {{ manifest_url }} --ignore-not-found=true
    @echo "✅ NGINX Ingress removed."
