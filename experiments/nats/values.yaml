---
nats:
  global:
    labels:
      app: jetstream
      team: main
  natsBox:
    enabled: false
  service:
    merge:
      metadata:
        annotations:
          service.kubernetes.io/topology-mode: Auto
  config:
    merge:
      accounts:
        iraq:
          jetstream: enabled
          users:
            - user: user
              password: password
            - user: default
              password: default
        lebanon:
          jetstream: enabled
          users:
            - user: lb-user
              password: user
            - user: lb-default
              password: default
        "$SYS":
          users:
            - user: admin
              password: admin
      system_account: "$SYS"
      no_auth_user: "default"
    cluster:
      noAdvertise: true
      enabled: true
      replicas: 5
    gateway:
      enabled: false
    leafnodes:
      enabled: false
    jetstream:
      enabled: true
      memoryStore:
        enabled: true
        maxSize: 150Mi
      fileStore:
        maxSize: 4Gi
        enabled: true
        storageDirectory: /data
        pvc:
          name: nats-gp3
          enabled: true
          size: 10Gi
  container:
    merge:
      resources:
        requests:
          cpu: 100m
          memory: 500Mi
          ephemeral-storage: 1Gi
        limits:
          cpu: 200m
          memory: 750Mi
          ephemeral-storage: 1Gi
  promExporter:
    enabled: false
    podMonitor:
      enabled: true
  extraResources:
    - apiVersion: v1
      kind: Service
      metadata:
        name:
          $tplYaml: >
            {{ include "nats.fullname" $ }}-lb
        labels:
          $tplYaml: |
            {{ include "nats.labels" $ }}
      spec:
        type: LoadBalancer
        selector:
          $tplYaml: |
            {{ include "nats.selectorLabels" $ }}
        ports:
          - name: nats
            port: 4222
            targetPort: nats
            protocol: TCP
